<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>

    <!-- Flowbite CSS (loaded first to allow Tailwind to override) -->
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css"
      rel="stylesheet"
    />

    <!-- Tailwind CSS (loaded after Flowbite) -->
    <link rel="stylesheet" href="/style/output.css" />

    <!-- Font Awesome 6 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <!-- Alpine.js -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>

    <!-- Other dependencies (Cropper.js, Cloudinary, etc.) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css"
    />
    <script
      src="https://widget.cloudinary.com/v2.0/global/all.js"
      type="text/javascript"
    ></script>

    <!-- SweetAlert2 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>

  <body
    x-data="adminLayout"
    :class="{'overflow-hidden': couponAdd.open || couponEdit.open || confirmModal.open}"
    class="flex min-h-screen bg-gray-50"
  >
    <!-- Sidebar -->
    <%- include("../admin/partials/organisms/sidebar.ejs", { adminSidebar }) %>

    <!-- Modals -->
    <div
      x-show="couponAdd.open"
      class="fixed inset-0 bg-black/80 flex items-start sm:items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto"
    >
      <div @click.stop class="w-full max-w-3xl">
        <%- include("../admin/partials/organisms/modals/couponCreateModal.ejs") %>
      </div>
    </div>

    <!-- Other modals (couponEdit, confirmModal) -->
    <div
      x-show="couponEdit.open"
      class="fixed inset-0 bg-black/80 flex items-start sm:items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto"
    >
      <div @click.stop class="w-full max-w-3xl">
        <%- include("../admin/partials/organisms/modals/couponEditModal.ejs") %>
      </div>
    </div>

    <div
      x-show="confirmModal.open"
      @click="confirmModal.open = false"
      class="fixed inset-0 bg-black/80 flex items-start sm:items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto"
    >
      <div @click.stop class="w-full max-w-md">
        <%- include("../common/modal/confirmModal.ejs") %>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex flex-1 flex-col">
      <header
        class="flex items-center justify-between bg-white px-4 sm:px-6 py-3 sm:py-4 shadow"
      >
        <h1 class="text-lg sm:text-xl font-semibold">Admin Dashboard</h1>
        <div class="flex items-center space-x-3 sm:space-x-4">
          <span class="text-gray-700 text-sm sm:text-base">Welcome, Admin</span>
          <a
            class="rounded-lg bg-red-500 px-3 sm:px-4 py-2 text-white text-sm sm:text-base"
            id="admin-logout"
            href="/admin/auth/login"
          >
            Logout
          </a>
        </div>
      </header>
      <main class="flex w-full flex-1 flex-col overflow-auto py-3 sm:py-4">
        <div id="content-area" class="p-3 sm:p-4 w-full">
          <%- body %>
        </div>
      </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/validator@13.9.0/validator.min.js"></script> <!-- validator -->
    <script src="/javascript/alpine/admin/adminLayout.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.46.0/dist/apexcharts.min.js"></script>
    <script type="module" src="/javascript/layout/adminLayout.js"></script>
  </body>
</html>