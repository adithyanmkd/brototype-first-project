<div class="flex">
  <%- include("../../partials/organisms/profileSidebar.ejs") %>

  <!-- Toast Messages -->
  <div class="absolute top-10 right-10">
    <%- include("../../partials/organisms/toastMsg.ejs") %>
  </div>

  <!-- pop up modal -->
  <%- include("../../partials/organisms/modal.ejs") %>
  <!-- pop up modal ended -->

  <div class="w-[70%] mx-auto p-4">
    <div
      x-data="{ wishlistItems: JSON.parse('<%= JSON.stringify(wishlist?.items ) %>')}"
    >
      <template x-for="item in wishlistItems" :key="item.productId">
        <!-- Wishlist Item -->
        <a :href="`/products/${item.productId}`">
          <div class="border rounded-lg p-4 mb-4 bg-white flex justify-between">
            <div class="flex items-center gap-6">
              <img
                :src="item.productDetails.images.cardImage.path"
                alt="Hybrid Mattress"
                class="w-24 h-24 object-cover rounded"
              />
              <div>
                <h2
                  x-text="item.productDetails.productName"
                  class="text-xl font-semibold"
                ></h2>
                <div class="flex items-center gap-3 mt-2">
                  <span class="text-xl font-bold">
                    ₹
                    <span
                      x-text="item.productDetails.price.sellingPrice"
                    ></span>
                  </span>
                  <span class="text-gray-400 line-through">
                    ₹
                    <span
                      x-text="item.productDetails.price.originalPrice"
                    ></span>
                  </span>
                  <span class="text-green-600"
                    >save ₹
                    <span
                      x-text="item.productDetails.price.originalPrice - item.productDetails.price.sellingPrice"
                    ></span>
                  </span>
                </div>
                <button
                  class="flex mt-4 border border-gray-200 px-4 cursor-pointer items-center gap-2 py-2 rounded-lg hover:border-blue-400 hover:text-blue-700 transition-all hover:scale-x-105 hover:font-medium hover:bg-blue-50"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path
                      d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"
                    />
                  </svg>
                  Move to cart
                </button>
              </div>
            </div>
            <div>
              <div class="flex gap-x-4 items-center">
                <span class="text-sm text-gray-500"
                  >Added on
                  <span
                    x-text="new Date(item.addedAt).toLocaleDateString('en-GB', {
                  day: '2-digit',
                  month: 'short',
                  year: 'numeric'
                })"
                  ></span
                ></span>
                <button
                  data-modal-target="popup-modal"
                  data-modal-toggle="popup-modal"
                  :data-product-id="item.productDetails._id"
                  class="deleteWishlist text-gray-400 transition-all hover:scale-150 hover:text-red-600 cursor-pointer"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </a>
      </template>
    </div>
  </div>
</div>

<script type="module" src="/javascript/ajax/pages/wishlist.js"></script>
